<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Garbage Collection App</title>
  <!-- Font Awesome for Icons -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
  <!-- Import Google Font -->
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap" rel="stylesheet">
  <style>
    /* General Styles */
    body {
      font-family: Arial, sans-serif;
      margin: 0;
      padding: 0;
      background-image: url('image.jpg.avif'); /* Add your image URL here */
      background-size: cover; /* Cover the entire screen */
      background-position: center; /* Center the image */
      background-repeat: no-repeat; /* Prevent the image from repeating */
      background-attachment: fixed; /* Fix the background while scrolling */
      color: white; /* Ensure text is readable on the background */
    }

    /* Sticky Navigation Bar */
    header {
      background-color: rgba(76, 175, 80, 0.9); /* Semi-transparent green */
      color: white;
      padding: 1rem;
      display: flex;
      justify-content: space-between;
      align-items: center;
      position: sticky;
      top: 0;
      z-index: 1000;
      box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1); /* Add shadow for depth */
    }

    header h1 {
      margin: 0;
      font-size: 1.5rem;
    }

    /* Logo and Username Section */
    #logo-username {
      display: flex;
      align-items: center;
      gap: 10px;
    }

    #logo {
      width: 40px;
      height: 40px;
      border-radius: 50%;
      object-fit: cover; /* Ensure the image fits properly */
    }

    #username {
      font-size: 1rem;
      font-weight: bold;
    }

    /* Logout Icon */
    #logout-icon {
      cursor: pointer;
      font-size: 1.2rem;
      margin-left: 10px;
      transition: color 0.3s ease;
    }

    #logout-icon:hover {
      color: #ff4d4d; /* Change color on hover */
    }

    nav ul {
      list-style: none;
      padding: 0;
      margin: 0;
      display: flex;
      align-items: center;
    }

    nav ul li {
      margin: 0 15px;
      position: relative;
    }

    nav ul li a {
      color: white;
      text-decoration: none;
      font-size: 1rem;
      padding: 0.5rem 1rem;
      border-radius: 5px;
      transition: background-color 0.3s ease, color 0.3s ease;
    }

    nav ul li a:hover {
      background-color: rgba(255, 255, 255, 0.2); /* Hover effect */
      color: #fff;
    }

    /* Dropdown Menu */
    nav ul li .dropdown {
      display: none;
      position: absolute;
      top: 100%;
      left: 0;
      background-color: rgba(76, 175, 80, 0.9);
      border-radius: 5px;
      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
      z-index: 1000;
    }

    nav ul li:hover .dropdown {
      display: block;
    }

    nav ul li .dropdown a {
      display: block;
      padding: 0.5rem 1rem;
      color: white;
      text-decoration: none;
    }

    nav ul li .dropdown a:hover {
      background-color: rgba(255, 255, 255, 0.2);
    }

    /* Main Content */
    main {
      padding: 2rem;
      background-color: rgba(255, 255, 255, 0.8); /* Semi-transparent white background for content */
      border-radius: 10px;
      margin: 2rem auto;
      max-width: 800px;
    }

    .hidden {
      display: none;
    }

    /* Form Styles */
    form {
      display: flex;
      flex-direction: column;
      gap: 1rem;
      max-width: 400px;
      margin: 0 auto;
    }

    form label {
      font-weight: bold;
      color: #333; /* Dark text for better readability */
    }

    form input, form select, form button {
      padding: 0.5rem;
      font-size: 1rem;
      border: 1px solid #ccc;
      border-radius: 5px;
    }

    form button {
      background-color: #4CAF50;
      color: white;
      border: none;
      cursor: pointer;
    }

    form button:hover {
      background-color: #45a049;
    }

    /* Tracking Section */
    #map {
      height: 200px;
      background-color: #ddd;
      margin-top: 1rem;
      border-radius: 10px;
    }

    /* Profile Section Styles */
    #profile {
      font-family: 'Georgia', serif; /* Use a more elegant font */
      font-size: 1.1rem; /* Slightly larger font size */
      line-height: 1.6; /* Improve readability with more line height */
      color: #333; /* Dark text for better contrast */
    }

    #profile h2 {
      font-size: 2rem; /* Larger heading */
      color: #4CAF50; /* Green color for the heading */
      margin-bottom: 1.5rem; /* Add some space below the heading */
    }

    #user-details p {
      margin-bottom: 1rem; /* Add space between profile details */
      font-weight: 500; /* Slightly bolder text */
    }

    #profile-image-display {
      border: 2px solid #4CAF50; /* Add a border to the profile image */
      padding: 2px; /* Add some padding */
    }

    #edit-profile-btn {
      background-color: #4CAF50; /* Green background */
      color: white; /* White text */
      border: none; /* Remove border */
      padding: 0.5rem 1rem; /* Add padding */
      font-size: 1rem; /* Font size */
      border-radius: 5px; /* Rounded corners */
      cursor: pointer; /* Pointer cursor on hover */
      transition: background-color 0.3s ease; /* Smooth transition */
      margin-top: 1rem; /* Add space above the button */
    }

    #edit-profile-btn:hover {
      background-color: #45a049; /* Darker green on hover */
    }

    /* History Section Styles */
    #history-section {
      margin-top: 2rem;
    }

    #history-table {
      width: 100%;
      border-collapse: collapse;
      margin-top: 1rem;
    }

    #history-table th,
    #history-table td {
      border: 1px solid #ddd;
      padding: 0.75rem;
      text-align: left;
    }

    #history-table th {
      background-color: #4CAF50;
      color: white;
    }

    #history-table tr:nth-child(even) {
      background-color: #f2f2f2;
    }

    #history-table tr:hover {
      background-color: #ddd;
    }

    /* Footer */
    footer {
      text-align: center;
      padding: 1rem;
      background-color: rgba(51, 51, 51, 0.8); /* Semi-transparent dark background */
      color: white;
      position: fixed;
      bottom: 0;
      width: 100%;
    }

    /* Home Section Styles */
    .home-container {
      display: flex;
      flex-direction: column;
      align-items: center; /* Center content horizontally */
      text-align: center; /* Center text */
    }

    .main-topic {
      font-size: 2.5rem; /* Larger font size */
      color: #4CAF50; /* Green color */
      margin-bottom: 2rem; /* Add space below the main topic */
    }

    .home-subsection {
      margin-bottom: 2rem;
      padding: 1.5rem;
      background-color: rgba(255, 255, 255, 0.9); /* Semi-transparent white background */
      border-radius: 10px;
      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1); /* Add shadow for depth */
    }

    .home-subsection h3 {
      color: #4CAF50; /* Green color for headings */
      margin-bottom: 1rem;
    }

    .home-subsection p {
      color: #333; /* Dark text for better readability */
      line-height: 1.6;
    }

    .home-subsection ol {
      padding-left: 1.5rem;
    }

    .home-subsection ol li {
      margin-bottom: 0.5rem;
    }

    .download-button-container {
      margin-top: 1rem; /* Add space above the button */
    }

    .download-button {
      display: inline-block;
      background-color: #4CAF50;
      color: white;
      padding: 0.75rem 1.5rem;
      border-radius: 5px;
      text-decoration: none;
      font-size: 1rem;
      transition: background-color 0.3s ease;
    }

    .download-button:hover {
      background-color: #45a049; /* Darker green on hover */
    }

    .developer-details {
      margin-top: 2rem; /* Add space above the developer details */
    }

    /* Payment Section Styles */
    #payment {
      text-align: center;
    }

    #payment h2 {
      font-size: 2rem;
      color: #4CAF50;
      margin-bottom: 1.5rem;
    }

    #payment-form {
      max-width: 400px;
      margin: 0 auto;
    }

    #payment-form label {
      font-weight: bold;
      color: #333;
    }

    #payment-form input,
    #payment-form select {
      width: 100%;
      padding: 0.5rem;
      font-size: 1rem;
      border: 1px solid #ccc;
      border-radius: 5px;
      margin-bottom: 1rem;
    }

    #payment-form button {
      background-color: #4CAF50;
      color: white;
      border: none;
      padding: 0.75rem 1.5rem;
      border-radius: 5px;
      cursor: pointer;
      font-size: 1rem;
      transition: background-color 0.3s ease;
    }

    #payment-form button:hover {
      background-color: #45a049;
    }

    #payment-confirmation {
      margin-top: 2rem;
      font-size: 1.2rem;
      color: #4CAF50;
    }

    /* Hide UPI fields by default */
    #upi-payment-fields {
      display: none;
    }

    /* Show UPI fields when UPI is selected */
    #upi-payment-fields.visible {
      display: block;
    }

    /* Hide Card fields when UPI is selected */
    #card-payment-fields.hidden {
      display: none;
    }

    /* Track Pickup Section Styles */
    #tracking-status {
      text-align: center;
    }

    #tracking-progress {
      margin-top: 2rem;
    }

    #tracking-progress h3 {
      font-size: 1.5rem;
      color: #4CAF50;
      margin-bottom: 1rem;
    }

    #tracking-progress ul {
      list-style: none;
      padding: 0;
      margin: 0;
      display: flex;
      justify-content: space-between;
      position: relative;
    }

    #tracking-progress ul::before {
      content: '';
      position: absolute;
      top: 50%;
      left: 0;
      right: 0;
      height: 2px;
      background-color: #ccc;
      z-index: -1;
    }

    #tracking-progress li {
      background-color: #fff;
      padding: 0.5rem 1rem;
      border-radius: 5px;
      border: 2px solid #ccc;
      position: relative;
      text-align: center;
    }

    #tracking-progress li.completed {
      border-color: #4CAF50;
      background-color: #e8f5e9;
    }

    #tracking-progress li.active {
      border-color: #4CAF50;
      background-color: #4CAF50;
      color: white;
    }

    /* Location Sharing Button */
    #share-location-btn {
      background-color: #4CAF50;
      color: white;
      border: none;
      padding: 0.5rem 1rem;
      border-radius: 5px;
      cursor: pointer;
      font-size: 1rem;
      margin-top: 1rem;
      transition: background-color 0.3s ease;
    }

    #share-location-btn:hover {
      background-color: #45a049;
    }

    #user-location {
      font-weight: bold;
      color: #4CAF50;
    }

    /* Notification Styles */
    .notification {
      position: fixed;
      top: 20px;
      right: 20px;
      background-color: #4CAF50;
      color: white;
      padding: 1rem;
      border-radius: 5px;
      box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
      z-index: 1000;
      display: none;
    }

    .notification.show {
      display: block;
    }
  </style>
</head>
<body>
  <header>
    <h1>EcoCollect</h1>
    <nav>
      <ul>
        <li><a href="#home">Home</a></li> <!-- Home link -->
        <li><a href="#request" id="request-link">Request Pickup</a></li> <!-- Request Pickup link -->
        <li><a href="#track">Track Pickup</a></li>
        <li>
          <a href="#profile" id="profile-link">Profile</a>
          <div class="dropdown">
            <!-- Remove Settings and Help links -->
          </div>
        </li>
      </ul>
    </nav>
    <!-- Logo, Username, and Logout Icon -->
    <div id="logo-username" class="hidden">
      <img id="logo" src="" alt="Logo">
      <span id="username"></span>
      <i id="logout-icon" class="fas fa-sign-out-alt"></i> <!-- Logout Icon -->
    </div>
  </header>

  <main>
    <!-- Sign In Section -->
    <section id="signin">
      <h2>Sign In</h2>
      <form id="signin-form">
        <label for="signin-email">Email:</label>
        <input type="email" id="signin-email" required>

        <label for="signin-password">Password:</label>
        <input type="password" id="signin-password" required>

        <button type="submit">Sign In</button>
        <p>Don't have an account? <a href="#" id="show-signup">Sign Up</a></p>
      </form>
    </section>

    <!-- Sign Up Section -->
    <section id="signup" class="hidden">
      <h2>Sign Up</h2>
      <form id="signup-form">
        <label for="signup-name">Name:</label>
        <input type="text" id="signup-name" required>

        <label for="signup-email">Email:</label>
        <input type="email" id="signup-email" required>

        <label for="signup-password">Password:</label>
        <input type="password" id="signup-password" required>

        <label for="signup-age">Age:</label>
        <input type="number" id="signup-age" required>

        <label for="signup-sex">Sex:</label>
        <select id="signup-sex" required>
          <option value="male">Male</option>
          <option value="female">Female</option>
          <option value="other">Other</option>
        </select>

        <label for="signup-phone">Phone Number:</label>
        <input type="tel" id="signup-phone" required>

        <label for="signup-address">Address:</label>
        <input type="text" id="signup-address" required>

        <label for="signup-image">Profile Image:</label>
        <input type="file" id="signup-image" accept="image/*" required>

        <button type="submit">Sign Up</button>
        <p>Already have an account? <a href="#" id="show-signin">Sign In</a></p>
      </form>
    </section>

    <!-- Home Section -->
    <section id="home" class="hidden">
      <div class="home-container">
        <h2 class="main-topic">Welcome to EcoCollect</h2>

        <!-- Importance of Waste Management -->
        <div class="home-subsection">
          <h3>Importance of Waste Management</h3>
          <p>
            Proper waste management is crucial for maintaining a clean and healthy environment. It helps reduce pollution, conserve resources, and prevent the spread of diseases. By managing waste effectively, we can minimize the impact on landfills, reduce greenhouse gas emissions, and promote recycling and composting.
          </p>
        </div>

        <!-- Difference Between Biodegradable and Non-Biodegradable Waste -->
        <div class="home-subsection">
          <h3>Difference Between Biodegradable and Non-Biodegradable Waste</h3>
          <p>
            <strong>Biodegradable Waste:</strong> This type of waste can be broken down naturally by microorganisms into simpler substances. Examples include food scraps, paper, and garden waste. Biodegradable waste is environmentally friendly and can be composted to create nutrient-rich soil.
          </p>
          <p>
            <strong>Non-Biodegradable Waste:</strong> This type of waste cannot be broken down naturally and persists in the environment for a long time. Examples include plastics, metals, and glass. Non-biodegradable waste requires proper recycling or disposal to prevent environmental harm.
          </p>
        </div>

        <!-- How to Make Manual Fertilizer -->
        <div class="home-subsection">
          <h3>How to Make Manual Fertilizer</h3>
          <p>
            Making your own fertilizer at home is easy and eco-friendly. Here's a simple method to create compost fertilizer:
          </p>
          <ol>
            <li><strong>Collect Organic Waste:</strong> Gather kitchen scraps like fruit peels, vegetable waste, coffee grounds, and eggshells.</li>
            <li><strong>Add Dry Materials:</strong> Mix in dry materials like leaves, straw, or shredded paper to balance the moisture.</li>
            <li><strong>Layer in a Compost Bin:</strong> Alternate layers of green (wet) and brown (dry) materials in a compost bin or pile.</li>
            <li><strong>Turn Regularly:</strong> Turn the compost pile every few weeks to aerate it and speed up decomposition.</li>
            <li><strong>Wait and Harvest:</strong> After a few months, the compost will turn into dark, crumbly soil. Use it to fertilize your plants!</li>
          </ol>
        </div>

        <!-- Download PDF Section -->
        <div class="home-subsection download-section">
          <h3>Download Project Details</h3>
          <p>Learn more about the EcoCollect project by downloading the detailed PDF document.</p>
          <div class="download-button-container">
            <a href="ak.pdf" download="EcoCollect_Project_Details.pdf" target="_blank" class="download-button">Download PDF</a>
          </div>
        </div>

        <!-- Developer Details Section -->
        <div class="home-subsection developer-details">
          <h3>Developer Details</h3>
          <p>This website was developed by <strong>Akash</strong>, a passionate software developer with expertise in web development and environmental sustainability.</p>
          <p>For more information, you can download my CV:</p>
          <div class="download-button-container">
            <a href="cv.pdf" download="Developer_CV.pdf" target="_blank" class="download-button">Download CV</a>
          </div>
        </div>
      </div>
    </section>

    <!-- Request Pickup Section -->
    <section id="request" class="hidden">
      <h2>Request a Pickup</h2>
      <form id="pickup-form">
        <label for="waste-type">Waste Type:</label>
        <select id="waste-type" required>
          <option value="organic">Organic</option>
          <option value="recyclable">Recyclable</option>
          <option value="hazardous">Hazardous</option>
        </select>

        <label for="pickup-time">Pickup Time:</label>
        <input type="datetime-local" id="pickup-time" required>

        <!-- New Fields -->
        <label for="building-number">Building Number:</label>
        <input type="text" id="building-number" placeholder="Enter building number" required>

        <label for="current-location">Current Location:</label>
        <input type="text" id="current-location" placeholder="Enter your current location" required>

        <label for="landmark">Landmark:</label>
        <input type="text" id="landmark" placeholder="Enter a nearby landmark" required>

        <label for="phone-number">Phone Number:</label>
        <input type="tel" id="phone-number" placeholder="Enter your phone number" required>

        <button type="submit">Schedule Pickup</button>
      </form>
    </section>

    <!-- Track Pickup Section -->
    <section id="track" class="hidden">
      <h2>Track Your Pickup</h2>
      <div id="tracking-status">
        <p>Collector is on the way!</p>
        <div id="map"></div>
        <div id="tracking-progress">
          <h3>Pickup Status:</h3>
          <ul>
            <li id="status-requested">Request Submitted</li>
            <li id="status-collector-assigned">Collector Assigned</li>
            <li id="status-on-the-way">On the Way</li>
            <li id="status-picked-up">Picked Up</li>
          </ul>
        </div>
      </div>
    </section>

    <!-- Profile Section -->
    <section id="profile" class="hidden">
      <h2>Your Profile</h2>
      <div id="user-details">
        <p>Name: <span id="user-name"></span></p>
        <p>Email: <span id="user-email"></span></p>
        <p>Age: <span id="user-age"></span></p>
        <p>Sex: <span id="user-sex"></span></p>
        <p>Phone Number: <span id="user-phone"></span></p>
        <p>Address: <span id="user-address"></span></p>
        <p>Profile Image: <img id="profile-image-display" src="" alt="Profile Image" style="width: 50px; height: 50px; border-radius: 50%;"></p>
        <!-- Add Location Section -->
        <p>Current Location: <span id="user-location">Not shared yet</span></p>
        <button id="share-location-btn">Share Current Location</button>
      </div>
      <button id="edit-profile-btn">Edit Profile</button>

      <!-- Edit Profile Form -->
      <form id="edit-profile-form" class="hidden">
        <label for="edit-name">Name:</label>
        <input type="text" id="edit-name" required>

        <label for="edit-age">Age:</label>
        <input type="number" id="edit-age" required>

        <label for="edit-sex">Sex:</label>
        <select id="edit-sex" required>
          <option value="male">Male</option>
          <option value="female">Female</option>
          <option value="other">Other</option>
        </select>

        <label for="edit-phone">Phone Number:</label>
        <input type="tel" id="edit-phone" required>

        <label for="edit-address">Address:</label>
        <input type="text" id="edit-address" required>

        <label for="edit-image">Profile Image:</label>
        <input type="file" id="edit-image" accept="image/*">

        <button type="submit">Save Changes</button>
        <button type="button" id="cancel-edit-btn">Cancel</button>
      </form>

      <!-- History Section -->
      <div id="history-section">
        <h3>Pickup Request History</h3>
        <table id="history-table">
          <thead>
            <tr>
              <th>Waste Type</th>
              <th>Pickup Time</th>
              <th>Building Number</th>
              <th>Current Location</th>
              <th>Landmark</th>
              <th>Phone Number</th>
              <th>Status</th>
            </tr>
          </thead>
          <tbody>
            <!-- History rows will be dynamically added here -->
          </tbody>
        </table>
      </div>
    </section>

    <!-- Payment Section -->
    <section id="payment" class="hidden">
      <h2>Payment</h2>
      <form id="payment-form">
        <!-- Payment Method Selection -->
        <label for="payment-method">Payment Method:</label>
        <select id="payment-method" required>
          <option value="card">Credit/Debit Card</option>
          <option value="upi">UPI</option>
        </select>

        <!-- Card Payment Fields -->
        <div id="card-payment-fields">
          <label for="card-number">Card Number:</label>
          <input type="text" id="card-number" placeholder="1234 5678 9012 3456" required>

          <label for="expiry-date">Expiry Date:</label>
          <input type="text" id="expiry-date" placeholder="MM/YY" required>

          <label for="cvv">CVV:</label>
          <input type="text" id="cvv" placeholder="123" required>
        </div>

        <!-- UPI Payment Fields -->
        <div id="upi-payment-fields" class="hidden">
          <label for="upi-id">UPI ID:</label>
          <input type="text" id="upi-id" placeholder="yourname@upi" required>
        </div>

        <button type="submit">Pay Now</button>
      </form>
      <div id="payment-confirmation" class="hidden">
        <p>Payment successful! Your pickup request has been confirmed.</p>
        <button id="view-tracking-btn">View Tracking Status</button>
      </div>
    </section>
  </main>

  <footer>
    <p>&copy; 2023 EcoCollect. All rights reserved.</p>
  </footer>

  <!-- Notification -->
  <div id="notification" class="notification">
    Please choose a payment method to confirm your pickup request.
  </div>

  <script>
    // DOM Elements
    const signinSection = document.getElementById('signin');
    const signupSection = document.getElementById('signup');
    const homeSection = document.getElementById('home');
    const requestSection = document.getElementById('request');
    const trackSection = document.getElementById('track');
    const profileSection = document.getElementById('profile');
    const paymentSection = document.getElementById('payment');
    const logoUsername = document.getElementById('logo-username');
    const usernameDisplay = document.getElementById('username');
    const logoutIcon = document.getElementById('logout-icon');
    const signinForm = document.getElementById('signin-form');
    const signupForm = document.getElementById('signup-form');
    const showSignupLink = document.getElementById('show-signup');
    const showSigninLink = document.getElementById('show-signin');
    const pickupForm = document.getElementById('pickup-form');
    const paymentForm = document.getElementById('payment-form');
    const paymentConfirmation = document.getElementById('payment-confirmation');
    const logo = document.getElementById('logo');
    const editProfileBtn = document.getElementById('edit-profile-btn');
    const editProfileForm = document.getElementById('edit-profile-form');
    const cancelEditBtn = document.getElementById('cancel-edit-btn');
    const profileLink = document.getElementById('profile-link');
    const homeLink = document.querySelector('a[href="#home"]'); // Select the Home link in the navbar
    const requestLink = document.getElementById('request-link'); // Select the Request Pickup link in the navbar
    const shareLocationBtn = document.getElementById('share-location-btn');
    const userLocationDisplay = document.getElementById('user-location');
    const viewTrackingBtn = document.getElementById('view-tracking-btn');
    const notification = document.getElementById('notification');
    const paymentMethod = document.getElementById('payment-method');
    const cardPaymentFields = document.getElementById('card-payment-fields');
    const upiPaymentFields = document.getElementById('upi-payment-fields');

    // Function to get the user's current location
    function getLocation() {
      if (navigator.geolocation) {
        navigator.geolocation.getCurrentPosition(
          (position) => {
            const latitude = position.coords.latitude;
            const longitude = position.coords.longitude;
            userLocationDisplay.textContent = `Latitude: ${latitude}, Longitude: ${longitude}`;

            // Save location to localStorage (optional)
            const user = JSON.parse(localStorage.getItem('user')) || {};
            user.location = { latitude, longitude };
            localStorage.setItem('user', JSON.stringify(user));
          },
          (error) => {
            console.error('Error fetching location:', error);
            userLocationDisplay.textContent = 'Unable to retrieve location.';
          }
        );
      } else {
        userLocationDisplay.textContent = 'Geolocation is not supported by this browser.';
      }
    }

    // Event Listener for Share Location Button
    shareLocationBtn.addEventListener('click', getLocation);

    // Load Location from localStorage (if available)
    function loadLocation() {
      const user = JSON.parse(localStorage.getItem('user'));
      if (user && user.location) {
        const { latitude, longitude } = user.location;
        userLocationDisplay.textContent = `Latitude: ${latitude}, Longitude: ${longitude}`;
      }
    }

    // Load Profile
    function loadProfile() {
      const user = JSON.parse(localStorage.getItem('user'));
      if (user) {
        usernameDisplay.textContent = user.name;
        logo.src = user.image || 'https://via.placeholder.com/40'; // Set profile image
        document.getElementById('user-name').textContent = user.name;
        document.getElementById('user-email').textContent = user.email;
        document.getElementById('user-age').textContent = user.age || 'Not set';
        document.getElementById('user-sex').textContent = user.sex || 'Not set';
        document.getElementById('user-phone').textContent = user.phone || 'Not set';
        document.getElementById('user-address').textContent = user.address || 'Not set';
        document.getElementById('profile-image-display').src = user.image || 'https://via.placeholder.com/50';

        // Load location if available
        loadLocation();
      }
    }

    // Show Home Section when Home Link is Clicked
    homeLink.addEventListener('click', (e) => {
      e.preventDefault(); // Prevent default link behavior
      // Hide all sections
      signinSection.classList.add('hidden');
      signupSection.classList.add('hidden');
      requestSection.classList.add('hidden');
      trackSection.classList.add('hidden');
      profileSection.classList.add('hidden');
      paymentSection.classList.add('hidden');
      // Show Home Section
      homeSection.classList.remove('hidden');
    });

    // Show Request Pickup Section when Request Pickup Link is Clicked
    requestLink.addEventListener('click', (e) => {
      e.preventDefault(); // Prevent default link behavior
      // Hide all sections
      signinSection.classList.add('hidden');
      signupSection.classList.add('hidden');
      homeSection.classList.add('hidden');
      trackSection.classList.add('hidden');
      profileSection.classList.add('hidden');
      paymentSection.classList.add('hidden');
      // Show Request Pickup Section
      requestSection.classList.remove('hidden');
    });

    // Show Sign Up Section
    showSignupLink.addEventListener('click', (e) => {
      e.preventDefault();
      signinSection.classList.add('hidden');
      signupSection.classList.remove('hidden');
    });

    // Show Sign In Section
    showSigninLink.addEventListener('click', (e) => {
      e.preventDefault();
      signupSection.classList.add('hidden');
      signinSection.classList.remove('hidden');
    });

    // Handle Sign Up
    signupForm.addEventListener('submit', (e) => {
      e.preventDefault();
      const name = document.getElementById('signup-name').value;
      const email = document.getElementById('signup-email').value;
      const password = document.getElementById('signup-password').value;
      const age = document.getElementById('signup-age').value;
      const sex = document.getElementById('signup-sex').value;
      const phone = document.getElementById('signup-phone').value;
      const address = document.getElementById('signup-address').value;
      const imageFile = document.getElementById('signup-image').files[0];

      // Convert image to Base64
      const reader = new FileReader();
      reader.onload = function (event) {
        const imageBase64 = event.target.result;

        // Save user to Local Database
        const user = { name, email, password, age, sex, phone, address, image: imageBase64 };
        localStorage.setItem('user', JSON.stringify(user));

        // Show Home Section
        signupSection.classList.add('hidden');
        homeSection.classList.remove('hidden');
        logoUsername.classList.remove('hidden');
        loadProfile();
      };
      reader.readAsDataURL(imageFile);
    });

    // Handle Sign In
    signinForm.addEventListener('submit', (e) => {
      e.preventDefault();
      const email = document.getElementById('signin-email').value;
      const password = document.getElementById('signin-password').value;

      // Check user in Local Database
      const user = JSON.parse(localStorage.getItem('user'));
      if (user && user.email === email && user.password === password) {
        signinSection.classList.add('hidden');
        homeSection.classList.remove('hidden');
        logoUsername.classList.remove('hidden');
        loadProfile();
      } else {
        alert('Invalid email or password');
      }
    });

    // Handle Pickup Request
    pickupForm.addEventListener('submit', (e) => {
      e.preventDefault();
      const wasteType = document.getElementById('waste-type').value;
      const pickupTime = document.getElementById('pickup-time').value;
      const buildingNumber = document.getElementById('building-number').value;
      const currentLocation = document.getElementById('current-location').value;
      const landmark = document.getElementById('landmark').value;
      const phoneNumber = document.getElementById('phone-number').value;

      // Show notification to choose payment method
      notification.classList.add('show');
      setTimeout(() => {
        notification.classList.remove('show');
      }, 3000);

      // Redirect to Payment Section
      requestSection.classList.add('hidden');
      paymentSection.classList.remove('hidden');
    });

    // Handle Payment Method Selection
    paymentMethod.addEventListener('change', (e) => {
      const selectedMethod = e.target.value;

      if (selectedMethod === 'card') {
        cardPaymentFields.classList.remove('hidden');
        upiPaymentFields.classList.add('hidden');
      } else if (selectedMethod === 'upi') {
        cardPaymentFields.classList.add('hidden');
        upiPaymentFields.classList.remove('hidden');
      }
    });

    // Handle Payment Submission
    paymentForm.addEventListener('submit', (e) => {
      e.preventDefault();
      const selectedMethod = document.getElementById('payment-method').value;

      if (selectedMethod === 'card') {
        const cardNumber = document.getElementById('card-number').value;
        const expiryDate = document.getElementById('expiry-date').value;
        const cvv = document.getElementById('cvv').value;

        if (!cardNumber || !expiryDate || !cvv) {
          alert('Please fill in all card details.');
          return;
        }

        // Simulate card payment processing
        setTimeout(() => {
          paymentForm.classList.add('hidden');
          paymentConfirmation.classList.remove('hidden');

          // Save pickup request to Local Database
          const wasteType = document.getElementById('waste-type').value;
          const pickupTime = document.getElementById('pickup-time').value;
          const buildingNumber = document.getElementById('building-number').value;
          const currentLocation = document.getElementById('current-location').value;
          const landmark = document.getElementById('landmark').value;
          const phoneNumber = document.getElementById('phone-number').value;

          const pickupRequest = {
            wasteType,
            pickupTime,
            buildingNumber,
            currentLocation,
            landmark,
            phoneNumber,
            status: 'Paid',
          };

          const pickupRequests = JSON.parse(localStorage.getItem('pickupRequests')) || [];
          pickupRequests.push(pickupRequest);
          localStorage.setItem('pickupRequests', JSON.stringify(pickupRequests));

          // Clear payment form fields
          paymentForm.reset();

          // Redirect to Track Pickup Section after 2 seconds
          setTimeout(() => {
            paymentSection.classList.add('hidden');
            trackSection.classList.remove('hidden');
            simulateTracking(); // Start tracking simulation
          }, 2000);
        }, 1000);
      } else if (selectedMethod === 'upi') {
        const upiId = document.getElementById('upi-id').value;

        if (!upiId) {
          alert('Please enter your UPI ID.');
          return;
        }

        // Simulate UPI payment processing
        setTimeout(() => {
          paymentForm.classList.add('hidden');
          paymentConfirmation.classList.remove('hidden');

          // Save pickup request to Local Database
          const wasteType = document.getElementById('waste-type').value;
          const pickupTime = document.getElementById('pickup-time').value;
          const buildingNumber = document.getElementById('building-number').value;
          const currentLocation = document.getElementById('current-location').value;
          const landmark = document.getElementById('landmark').value;
          const phoneNumber = document.getElementById('phone-number').value;

          const pickupRequest = {
            wasteType,
            pickupTime,
            buildingNumber,
            currentLocation,
            landmark,
            phoneNumber,
            status: 'Paid',
          };

          const pickupRequests = JSON.parse(localStorage.getItem('pickupRequests')) || [];
          pickupRequests.push(pickupRequest);
          localStorage.setItem('pickupRequests', JSON.stringify(pickupRequests));

          // Clear payment form fields
          paymentForm.reset();

          // Redirect to Track Pickup Section after 2 seconds
          setTimeout(() => {
            paymentSection.classList.add('hidden');
            trackSection.classList.remove('hidden');
            simulateTracking(); // Start tracking simulation
          }, 2000);
        }, 1000);
      }
    });

    // Function to simulate tracking progress
    function simulateTracking() {
      const statusElements = [
        document.getElementById('status-requested'),
        document.getElementById('status-collector-assigned'),
        document.getElementById('status-on-the-way'),
        document.getElementById('status-picked-up'),
      ];

      let currentStep = 0;

      const interval = setInterval(() => {
        if (currentStep < statusElements.length) {
          statusElements[currentStep].classList.add('completed');
          if (currentStep > 0) {
            statusElements[currentStep - 1].classList.remove('active');
          }
          statusElements[currentStep].classList.add('active');
          currentStep++;
        } else {
          clearInterval(interval);
        }
      }, 2000); // Update status every 2 seconds
    }

    // Show Edit Profile Form
    editProfileBtn.addEventListener('click', () => {
      const user = JSON.parse(localStorage.getItem('user'));
      if (user) {
        document.getElementById('edit-name').value = user.name;
        document.getElementById('edit-age').value = user.age || '';
        document.getElementById('edit-sex').value = user.sex || '';
        document.getElementById('edit-phone').value = user.phone || '';
        document.getElementById('edit-address').value = user.address || '';
        editProfileForm.classList.remove('hidden');
      }
    });

    // Handle Edit Profile Form Submission
    editProfileForm.addEventListener('submit', (e) => {
      e.preventDefault();
      const user = JSON.parse(localStorage.getItem('user'));
      if (user) {
        user.name = document.getElementById('edit-name').value;
        user.age = document.getElementById('edit-age').value;
        user.sex = document.getElementById('edit-sex').value;
        user.phone = document.getElementById('edit-phone').value;
        user.address = document.getElementById('edit-address').value;

        // Handle profile image update
        const imageFile = document.getElementById('edit-image').files[0];
        if (imageFile) {
          const reader = new FileReader();
          reader.onload = function (event) {
            user.image = event.target.result;
            localStorage.setItem('user', JSON.stringify(user));
            loadProfile();
          };
          reader.readAsDataURL(imageFile);
        } else {
          localStorage.setItem('user', JSON.stringify(user));
          loadProfile();
        }

        editProfileForm.classList.add('hidden');
      }
    });

    // Cancel Edit Profile
    cancelEditBtn.addEventListener('click', () => {
      editProfileForm.classList.add('hidden');
    });

    // Logout
    logoutIcon.addEventListener('click', () => {
      // Hide all sections except sign-in and sign-up
      homeSection.classList.add('hidden');
      requestSection.classList.add('hidden');
      trackSection.classList.add('hidden');
      profileSection.classList.add('hidden');
      paymentSection.classList.add('hidden');
      logoUsername.classList.add('hidden');

      // Show the sign-in section
      signinSection.classList.remove('hidden');

      // Clear the form fields (optional)
      signinForm.reset();

      // Clear user data from localStorage (optional)
      localStorage.removeItem('user');
      localStorage.removeItem('pickupRequests');

      // Reset the UI state
      usernameDisplay.textContent = '';
      logo.src = '';
      document.getElementById('user-name').textContent = '';
      document.getElementById('user-email').textContent = '';
      document.getElementById('user-age').textContent = '';
      document.getElementById('user-sex').textContent = '';
      document.getElementById('user-phone').textContent = '';
      document.getElementById('user-address').textContent = '';
      document.getElementById('profile-image-display').src = '';
      userLocationDisplay.textContent = 'Not shared yet';
    });

    // Show Profile Section when Profile Link is Clicked
    profileLink.addEventListener('click', (e) => {
      e.preventDefault(); // Prevent default link behavior
      // Hide all sections
      signinSection.classList.add('hidden');
      signupSection.classList.add('hidden');
      homeSection.classList.add('hidden');
      requestSection.classList.add('hidden');
      trackSection.classList.add('hidden');
      paymentSection.classList.add('hidden');
      // Show Profile Section
      profileSection.classList.remove('hidden');
      loadProfile(); // Load profile data
      displayHistory(); // Display pickup request history
    });

    // Function to display pickup request history
    function displayHistory() {
      const historyTableBody = document.querySelector('#history-table tbody');
      historyTableBody.innerHTML = ''; // Clear existing rows

      // Retrieve pickup requests from localStorage
      const pickupRequests = JSON.parse(localStorage.getItem('pickupRequests')) || [];

      // Add each request to the table
      pickupRequests.forEach((request) => {
        const row = document.createElement('tr');
        row.innerHTML = `
          <td>${request.wasteType}</td>
          <td>${new Date(request.pickupTime).toLocaleString()}</td>
          <td>${request.buildingNumber}</td>
          <td>${request.currentLocation}</td>
          <td>${request.landmark}</td>
          <td>${request.phoneNumber}</td>
          <td>${request.status || 'Pending'}</td>
        `;
        historyTableBody.appendChild(row);
      });
    }

    // Show Track Pickup Section when Track Pickup Link is Clicked
    document.querySelector('a[href="#track"]').addEventListener('click', (e) => {
      e.preventDefault(); // Prevent default link behavior
      // Hide all sections
      signinSection.classList.add('hidden');
      signupSection.classList.add('hidden');
      homeSection.classList.add('hidden');
      requestSection.classList.add('hidden');
      profileSection.classList.add('hidden');
      paymentSection.classList.add('hidden');
      // Show Track Pickup Section
      trackSection.classList.remove('hidden');
      // Start tracking simulation
      simulateTracking();
    });

    // Initialize
    if (localStorage.getItem('user')) {
      signinSection.classList.add('hidden');
      homeSection.classList.remove('hidden');
      logoUsername.classList.remove('hidden');
      loadProfile();
    } else {
      signinSection.classList.remove('hidden'); // Show sign-in section by default
    }
  </script>
</body>
</html>